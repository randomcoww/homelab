---
variant: fcos
version: 1.5.0
passwd:
  users:
    ${indent(4, yamlencode(
      concat([
        for _, user in users :
        merge({name = user.name}, user.unix)
      ], [{
        name = "core"
        should_exist = false
      }])
    ))}

storage:
  files:
    - path: /etc/sudoers.d/coreos-sudo-group
      overwrite: true
      mode: 0600
      contents:
        inline: |
          %sudo ALL=(ALL) NOPASSWD: ALL
    - path: /etc/security/pwquality.conf.d/20-disable-dict.conf
      overwrite: true
      mode: 0644
      contents:
        inline: |
          dictcheck = 0